#include "obliv.oh"
#include "obliv_logf.oh"
#include "obliv_logf_test.h"

void OblivLogfTestOblivc(void* vargs) {
  OblivLogfTestOblivcArgs* args = vargs;
  obliv float* inputs = calloc(args->len, sizeof(obliv float));
  obliv float* outputs = calloc(args->len, sizeof(obliv float));
  for (int i = 0; i < args->len; i++) {
    inputs[i] = feedOblivFloat(args->inputs[i], 2);
  }
  for (int i = 0; i < args->len; i++) {
    outputs[i] = obliv_logf(inputs[i]);
  }
  for (int i = 0; i < args->len; i++) {
    revealOblivFloat(&args->outputs[i], outputs[i], 1);
  }
  free(inputs);
  free(outputs);
}